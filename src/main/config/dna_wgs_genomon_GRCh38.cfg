#
# Genomon pipeline configuration file
#

[REFERENCE]
# prepared reference fasta file
ref_fasta                               = SCRIPT_DIR/database/GRCh38/Homo_sapiens_assembly38.fasta
interval_list                           = SCRIPT_DIR/main/config/GRCh38.interval_list
genome_size                             = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/database/GRCh38.bwa-0.7.17/GRCh38.genome_size
gaptxt                                  = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/database/hg38.fa/gap.txt
bait_file                               = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/database/bait/refGene.coding.exon.hg38.190308.bed
simple_repeat_tabix_db                  = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/database/tabix/simpleRepeat_hg38.bed.gz
HGVD_2013_tabix_db                      = 
HGVD_2016_tabix_db                      = 
ExAC_tabix_db                           = 
hotspot_db                              = 

[SOFTWARE]
# prepared tools
blat                                    = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/install/blat_x86_64/blat
bwa                                     = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/install/bwa-0.7.8/bwa
samtools                                = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/install/samtools-1.2/samtools
bedtools                                = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/install/bedtools-2.24.0/bin/bedtools
biobambam                               = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/install/biobambam-0.0.191/src
htslib                                  = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/install/htslib-1.3
r_scripts                               = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/install/genomon_Rscripts-0.1.3
genomon_sv                              = SCRIPT_DIR/main/genomonsv/GenomonSV-0.6.1b1/MyGenomonSV/bin/GenomonSV
sv_utils                                = SCRIPT_DIR/main/genomonsv/sv_utils-0.5.1/Mysv_utils/bin/sv_utils
mutfilter                               = SCRIPT_DIR/main/mutfilter/GenomonMutationFilter-0.2.1/Mymutfilter/bin/mutfilter
ebfilter                                = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/local/python2.7-packages/bin/EBFilter
fisher                                  = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/local/python2.7-packages/bin/fisher
mutanno                                 = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/local/python2.7-packages/bin/mutanno
genomon_qc                              = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/local/python2.7-packages/bin/genomon_qc
genomon_pa                              = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/local/python2.7-packages/bin/genomon_pa
paplot                                  = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/local/python2.7-packages/bin/paplot
mutil                                   = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/local/python2.7-packages/bin/mutil
hotspot                                 = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/local/python2.7-packages/bin/hotspotCall
bamstats                                = /share/pub/genomon/.genomon_local/PCAP/PCAP-core-dev.20150511/bin/bam_stats.pl

# annovar needs to be installed individually
annovar                                 = annovar

[ENV]
PERL5LIB                                = /share/pub/genomon/.genomon_local/PCAP/ICGC/lib/perl5/:/share/pub/genomon/.genomon_local/PCAP/local/lib:/share/pub/genomon/.genomon_local/PCAP/local/lib/perl5:/share/pub/genomon/.genomon_local/PCAP/local/lib/perl5/5.14.4/x86_64-linux-thread-multi
PERL                                    = /share/pub/genomon/.genomon_local/PCAP/local/bin
PYTHONHOME                              = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/local/python/2.7.10
PYTHONPATH                              = SCRIPT_DIR/main/mutfilter/GenomonMutationFilter-0.2.1/Mymutfilter/lib/python2.7/site-packages/:SCRIPT_DIR/main/genomonsv/sv_utils-0.5.1/Mysv_utils/lib/python2.7/site-packages/:SCRIPT_DIR/main/genomonsv/GenomonSV-0.6.1b1/MyGenomonSV/lib/python2.7/site-packages/:/share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/local/python2.7-packages/lib/python
LD_LIBRARY_PATH                         = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/local/python2.7-packages/lib:/share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/local/lib:${LD_LIBRARY_PATH}
R_PATH                                  = /share/pub/genomon/.genomon_local/R/local/bin
R_LD_LIBRARY_PATH                       = /share/pub/genomon/.genomon_local/R/local/lib64/R/lib
R_LIBS                                  = /share/pub/genomon/.genomon_local/R/local/lib64/R/library

######################################################################
#
# Analysis parameters
#
#   If not defined, default values are going to be used in the pipeline.
#

##########
# parameters for bam2fastq
[bam2fastq]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=2G,mem_req=2G
params = collate=1 exclude=QCFAIL,SECONDARY,SUPPLEMENTARY tryoq=0


##########
# parameters for split fastq
[split_fastq]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=2G,mem_req=2G 
split_fastq_line_number = 40000000
fastq_filter = False

##########
# parameters for bwa_mem

[bwa_mem]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=10.6G,mem_req=10.6G
bwa_params = -T 0 

##########
## BAM markduplicates
[markduplicates]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=10.6G,mem_req=10.6G
java_memory = 10.6G

##########
# BAM file statistics
[qc_bamstats]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=2G,mem_req=2G

[qc_coverage]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=5.3G,mem_req=5.3G
coverage    = 2,10,20,30,40,50,100
wgs_flag = True
wgs_incl_bed_width = 1000000
wgs_i_bed_lines = 10000
wgs_i_bed_width = 100
samtools_params = -F 3332 -f 2

[qc_merge]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=2G,mem_req=2G

###########
# mutation call
[mutation_call]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=5.3G,mem_req=5.3G

[fisher_mutation_call]
pair_params = --min_depth 8 --base_quality 15 --min_variant_read 4 --min_allele_freq 0.02 --max_allele_freq 0.1 --fisher_value 0.1 --samtools_params "-q 20 -BQ0 -d 10000000 --ff UNMAP,SECONDARY,QCFAIL,DUP"
single_params = --min_depth 8 --base_quality 15 --min_variant_read 4 --min_allele_freq 0.02 --post_10_q 0.02 --samtools_params "-q 20 -BQ0 -d 10000000 --ff UNMAP,SECONDARY,QCFAIL,DUP"

[realignment_filter]
params = --score_difference 5 --window_size 200 --max_depth 5000 --exclude_sam_flags 3332

[indel_filter]
params = --search_length 40 --neighbor 5 --min_depth 8 --min_mismatch 100000 --af_thres 1 --samtools_params "-q 20 -BQ0 -d 10000000 --ff UNMAP,SECONDARY,QCFAIL,DUP"

[breakpoint_filter]
params = --max_depth 1000 --min_clip_size 20 --junc_num_thres 0 --mapq_thres 10 --exclude_sam_flags 3332

[eb_filter]
map_quality = 20
base_quality = 15
filter_flags = UNMAP,SECONDARY,QCFAIL,DUP

[hotspot]
active_hotspot_flag = False
params = -t 0.1 -c 0.1 -R 0.1 -m 8.0 -S "-B -q 20 -Q2 -d 10000000" 

[annotation]
active_annovar_flag = True
annovar_buildver = hg38
table_annovar_params = -buildver hg38 -remove --otherinfo -protocol refGene,cytoBand,genomicSuperDups,esp6500siv2_all,1000g2015aug_all,1000g2015aug_afr,1000g2015aug_eas,1000g2015aug_eur,snp131,snp138,snp131NonFlagged,snp138NonFlagged,ljb26_all,avsnp150,cg46,cg69,dbscsnv11,eigen,gnomad_exome,gnomad_genome,intervar_20180118,revel,mcap,gme,exac03,exac03nontcga,exac03nonpsych,kaviar_20150923,hrcr1,fathmm,cg69,cg46,clinvar_20211010,ToMMo,HGVD,HGVD_XY,cosmic94_coding,cosmic94_noncoding,tumorportal,cBioPortal_all_mutation_annovar,tfbsConsSites,wgRna,targetScanS,disclosure  -operation gx,r,r,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,r,r,r,r -nastring . -xreffile SCRIPT_DIR/database/humandb/gene_xref.txt
annovar_database = annovar/humandb
# Use of this HGVD database is subject to compliance with the terms of use.
# Please refere to the site below:
# http://www.genome.med.kyoto-u.ac.jp/SnpDB/about.html
active_HGVD_2013_flag = False
active_HGVD_2016_flag = False
# Use of this ExAC database is subject to compliance with the terms of use.
# Please refere to the site below:
# http://exac.broadinstitute.org/faq
active_ExAC_flag = False

[mutation_merge]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=3G,mem_req=3G

[mutation_util]
pair_params = --fish_pval 1.0 --realign_pval 1.0 --eb_pval 4.0 --tcount 4 --ncount 2
single_params = --post10q 0.1 --r_post10q 0.1 --count 4

##########
## Genomon SV

[sv_parse]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=8G,mem_req=8G
params =

[sv_merge]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=8G,mem_req=8G
params = 

[sv_filt]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=7G,mem_req=7G -pe def_slot 6 
params = --min_junc_num 2 --max_control_variant_read_pair 10 --min_overhang_size 50 --thread_num 6 --grc --genome_id hg38 --gene_bed SCRIPT_DIR/main/genomonsv/data/chr_gene.bed.gz --exon_bed SCRIPT_DIR/main/genomonsv/data/chr_exon.bed.gz
sv_utils_params = --min_tumor_allele_freq 0.07 --max_control_variant_read_pair 1 --control_depth_thres 10 --inversion_size_thres 1000 --min_overhang_size 100 --grc --simple_repeat_file /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/database/GenomonSV-0.6.0rc1/hg38/simpleRepeat.txt.gz --genome_id hg38 --refseq_junc_info SCRIPT_DIR/main/genomonsv/data/chr_refseq_junc.bed.gz --gencode_junc_info SCRIPT_DIR/main/genomonsv/data/chr_gencode_junc.bed.gz  --simple_repeat_info SCRIPT_DIR/main/genomonsv/data/chr_simple_repeat.bed.gz 

##########
## Post Analysis
[paplot]
enable = False 
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=2G,mem_req=2G
include_unpair = True
include_unpanel = True
title = Genomon
remarks = Data used in this report were generated using below software.
software = genomon_pipeline:Genomon-Pipeline, genomon_sv:GenomonSV, sv_utils:sv_utils, fisher:GenomonFisher, mutfilter:GenomonMutationFilter, ebfilter:EBFilter, mutanno:mutanno, mutil:mutil, genomon_qc:GenomonQC
config_file = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/genomon_conf/paplot/paplot_dna_GRCh38.cfg

[post_analysis]
enable = False
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=2G,mem_req=2G
config_file = /share/pub/genomon/.genomon_local/genomon_pipeline-2.6.3/install/python-packages/GenomonPostAnalysis-1.4.1/genomon_post_analysis.cfg

############
# pmsignature

[pre_pmsignature]
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=2G,mem_req=2G

[pmsignature_full]
enable = False
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=2G,mem_req=2G
signum_min = 2
signum_max = 6
trdirflag = F
trialnum = 10
bgflag = T
bs_genome = BSgenome.Hsapiens.UCSC.hg38::BSgenome.Hsapiens.UCSC.hg38
txdb_transcript = TxDb.Hsapiens.UCSC.hg38.knownGene::TxDb.Hsapiens.UCSC.hg38.knownGene

[pmsignature_ind]
enable = False
qsub_option = -q '!mjobs_rerun.q' -l os7,s_vmem=2G,mem_req=2G
signum_min = 2
signum_max = 6
trdirflag = T
trialnum = 10
bgflag = T
bs_genome = BSgenome.Hsapiens.UCSC.hg38::BSgenome.Hsapiens.UCSC.hg38
txdb_transcript = TxDb.Hsapiens.UCSC.hg38.knownGene::TxDb.Hsapiens.UCSC.hg38.knownGene

